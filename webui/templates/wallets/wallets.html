{{ define "page" }}
<div class="container mt-2">
  <div class="d-flex justify-content-between align-items-center py-2">
    <h2>Wallet Overview</h2>
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-outline-primary active" id="wallet-view-btn">Wallet View</button>
      <button type="button" class="btn btn-outline-primary" id="transaction-view-btn">Transaction View</button>
    </div>
  </div>
  
  <!-- Wallet View -->
  <div id="wallet-view" class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>Address</th>
          <th>Name</th>
          <th>Balance</th>
          <th data-bs-toggle="popover" data-bs-trigger="hover" data-bs-content="Format: [pending nonce] / [confirmed nonce]" style="cursor: help;">Nonces</th>
          <th>Pending TXs</th>
          <th>Used By</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- Root Wallet -->
        <tr class="align-middle wallet-row" data-wallet-address="{{ .RootWallet.Address }}">
          <td class="font-monospace">{{ .RootWallet.Address }}</td>
          <td>{{ .RootWallet.Name }}</td>
          <td>{{ .RootWallet.Balance }} ETH</td>
          <td>{{ .RootWallet.PendingNonce }} / {{ .RootWallet.ConfirmedNonce }}</td>
          <td>{{ subUI64 .RootWallet.PendingNonce .RootWallet.ConfirmedNonce }}</td>
          <td>
            <span class="badge bg-primary">Root Wallet</span>
            <button class="btn btn-sm btn-success ms-2" id="send-funds-btn" title="Send Funds">
              <i class="fas fa-paper-plane"></i> Send
            </button>
          </td>
          <td>
            <button class="btn btn-sm btn-outline-secondary expand-btn" data-wallet="{{ .RootWallet.Address }}" title="Toggle Transactions">
              <i class="fas fa-chevron-down"></i>
            </button>
          </td>
        </tr>
        
        <!-- Spammer Wallets -->
        {{ range .SpammerWallets }}
        <tr class="align-middle wallet-row" data-wallet-address="{{ .Address }}">
          <td class="font-monospace">{{ .Address }}</td>
          <td>{{ .Name }}</td>
          <td>{{ .Balance }} ETH</td>
          <td>{{ .PendingNonce }} / {{ .ConfirmedNonce }}</td>
          <td>{{ subUI64 .PendingNonce .ConfirmedNonce }}</td>
          <td>
            <div class="d-flex align-items-center gap-2">
              <a href="/" class="text-decoration-none spammer-name-link">
                #{{ .SpammerID }}
                {{ if .SpammerName }}
                  <small class="text-muted">({{ .SpammerName }})</small>
                {{ end }}
              </a>
              {{ if eq .SpammerStatus 0 }}
                <span class="badge bg-warning">Paused</span>
              {{ else if eq .SpammerStatus 1 }}
                <span class="badge bg-success">Running</span>
              {{ else if eq .SpammerStatus 2 }}
                <span class="badge bg-info">Finished</span>
              {{ else }}
                <span class="badge bg-danger">Failed</span>
              {{ end }}
            </div>
          </td>
          <td>
            <button class="btn btn-sm btn-outline-secondary expand-btn" data-wallet="{{ .Address }}" title="Toggle Transactions">
              <i class="fas fa-chevron-down"></i>
            </button>
          </td>
        </tr>
        {{ end }}
      </tbody>
    </table>
  </div>
  
  <!-- Transaction View -->
  <div id="transaction-view" class="table-responsive" style="display: none;">
    <table class="table">
      <thead>
        <tr>
          <th>Hash</th>
          <th>Wallet Address</th>
          <th>Wallet Name</th>
          <th>Nonce</th>
          <th>Value</th>
          <th>Fee</th>
          <th>Base Fee</th>
          <th>Submitted</th>
          <th>Rebroadcasts</th>
          <th>Last Rebroadcast</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="transaction-list">
        <!-- Transactions will be loaded here -->
      </tbody>
    </table>
  </div>
</div>

<!-- Send Funds Modal -->
<div class="modal fade" id="sendFundsModal" tabindex="-1" aria-labelledby="sendFundsModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="sendFundsModalLabel">Send Funds from Root Wallet</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="sendFundsForm">
          <div class="mb-3">
            <label for="targetAddress" class="form-label">Target Address <span class="text-danger">*</span></label>
            <input type="text" class="form-control" id="targetAddress" placeholder="0x..." required>
            <div class="form-text">Ethereum address to send funds to</div>
          </div>
          
          <div class="row mb-3">
            <div class="col-8">
              <label for="amount" class="form-label">Amount <span class="text-danger">*</span></label>
              <input type="number" class="form-control" id="amount" step="any" placeholder="0.0" required>
            </div>
            <div class="col-4">
              <label for="unit" class="form-label">Unit <span class="text-danger">*</span></label>
              <select class="form-select" id="unit" required>
                <option value="eth">ETH</option>
                <option value="gwei">Gwei</option>
                <option value="wei">Wei</option>
              </select>
            </div>
          </div>

          <div class="mb-3">
            <label for="calldata" class="form-label">Call Data (Optional)</label>
            <input type="text" class="form-control" id="calldata" placeholder="0x">
            <div class="form-text">Hex encoded data to include in the transaction</div>
          </div>

          <div class="mb-3">
            <label for="gasLimit" class="form-label">Gas Limit</label>
            <input type="number" class="form-control" id="gasLimit" placeholder="21000">
            <div class="form-text">Leave empty for automatic estimation (21000 for transfers, 100000 for contract calls)</div>
          </div>

          <div class="row mb-3">
            <div class="col-6">
              <label for="maxFee" class="form-label">Max Fee (Gwei)</label>
              <input type="number" class="form-control" id="maxFee" step="0.1" placeholder="Auto">
              <div class="form-text">Maximum fee per gas</div>
            </div>
            <div class="col-6">
              <label for="maxTip" class="form-label">Max Tip (Gwei)</label>
              <input type="number" class="form-control" id="maxTip" step="0.1" placeholder="2.0">
              <div class="form-text">Maximum priority fee</div>
            </div>
          </div>

          <div class="alert alert-info">
            <i class="fas fa-info-circle"></i> 
            <strong>Note:</strong> This transaction will be sent from the root wallet and logged in the audit logs.
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-success" id="submitSendFunds">
          <i class="fas fa-paper-plane"></i> Send Transaction
        </button>
      </div>
    </div>
  </div>
</div>
{{ end }}

{{ define "js" }}
<script>
/* setTimeout(() => window.location.reload(), 60000); */

document.getElementById('wallet-view-btn').addEventListener('click', function() {
  showView('wallet');
});

document.getElementById('transaction-view-btn').addEventListener('click', function() {
  showView('transaction');
});

document.addEventListener('DOMContentLoaded', function() {
  const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]');
  const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl));
  
  initSendFundsModal();
});

function copyToClipboard(text, button) {
  navigator.clipboard.writeText(text).then(function() {
    const originalHTML = button.innerHTML;
    button.innerHTML = '<i class="fas fa-check"></i> Copied!';
    button.classList.remove('btn-outline-secondary');
    button.classList.add('btn-success');
    
    setTimeout(function() {
      button.innerHTML = originalHTML;
      button.classList.remove('btn-success');
      button.classList.add('btn-outline-secondary');
    }, 2000);
  }).catch(function(err) {
    console.error('Failed to copy text: ', err);
    const originalHTML = button.innerHTML;
    button.innerHTML = '<i class="fas fa-times"></i> Failed';
    button.classList.remove('btn-outline-secondary');
    button.classList.add('btn-danger');
    
    setTimeout(function() {
      button.innerHTML = originalHTML;
      button.classList.remove('btn-danger');
      button.classList.add('btn-outline-secondary');
    }, 2000);
  });
}

function showView(viewType) {
  const walletView = document.getElementById('wallet-view');
  const transactionView = document.getElementById('transaction-view');
  const walletBtn = document.getElementById('wallet-view-btn');
  const transactionBtn = document.getElementById('transaction-view-btn');
  
  if (viewType === 'wallet') {
    walletView.style.display = 'block';
    transactionView.style.display = 'none';
    walletBtn.classList.add('active');
    transactionBtn.classList.remove('active');
  } else {
    walletView.style.display = 'none';
    transactionView.style.display = 'block';
    walletBtn.classList.remove('active');
    transactionBtn.classList.add('active');
    loadAllTransactions();
  }
}

document.querySelectorAll('.expand-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    const walletAddress = this.getAttribute('data-wallet');
    const walletRow = this.closest('tr');
    const existingTxRow = walletRow.nextElementSibling;
    const icon = this.querySelector('i');
    
    if (existingTxRow && existingTxRow.classList.contains('tx-expansion-row')) {
      existingTxRow.remove();
      icon.classList.replace('fa-chevron-up', 'fa-chevron-down');
    } else {
      icon.classList.replace('fa-chevron-down', 'fa-chevron-up');
      loadWalletTransactions(walletAddress, walletRow);
    }
  });
});

function loadWalletTransactions(walletAddress, walletRow) {
  fetch(`/api/pending-transactions?wallet=${encodeURIComponent(walletAddress)}`)
    .then(response => response.json())
    .then(transactions => {
      const txRow = document.createElement('tr');
      txRow.classList.add('tx-expansion-row');
      
      const txCell = document.createElement('td');
      txCell.setAttribute('colspan', '7');
      txCell.classList.add('p-0');
      
      if (!transactions || transactions.length === 0) {
        txCell.innerHTML = '<div class="p-3 text-muted">No pending transactions</div>';
      } else {
        const txTable = createTransactionTable(transactions);
        txCell.appendChild(txTable);
      }
      
      txRow.appendChild(txCell);
      walletRow.insertAdjacentElement('afterend', txRow);
    })
    .catch(error => {
      console.error('Error loading wallet transactions:', error);
      
      const expandBtn = walletRow.querySelector('.expand-btn');
      const icon = expandBtn.querySelector('i');
      icon.classList.replace('fa-chevron-up', 'fa-chevron-down');
      
      const txRow = document.createElement('tr');
      txRow.classList.add('tx-expansion-row');
      
      const txCell = document.createElement('td');
      txCell.setAttribute('colspan', '7');
      txCell.classList.add('p-0');
      txCell.innerHTML = '<div class="p-3 text-danger">Error loading transactions</div>';
      
      txRow.appendChild(txCell);
      walletRow.insertAdjacentElement('afterend', txRow);
    });
}

function loadAllTransactions() {
  const transactionList = document.getElementById('transaction-list');
  transactionList.innerHTML = '<tr><td colspan="11" class="text-center">Loading...</td></tr>';
  
  fetch('/api/pending-transactions')
    .then(response => response.json())
    .then(transactions => {
      transactionList.innerHTML = '';
      
      if (!transactions || transactions.length === 0) {
        transactionList.innerHTML = '<tr><td colspan="11" class="text-center text-muted">No pending transactions</td></tr>';
      } else {
        transactions.forEach(tx => {
          const row = createTransactionRow(tx);
          transactionList.appendChild(row);
        });
      }
    })
    .catch(error => {
      console.error('Error loading transactions:', error);
      transactionList.innerHTML = '<tr><td colspan="11" class="text-center text-danger">Error loading transactions</td></tr>';
    });
}

function createTransactionTable(transactions) {
  const table = document.createElement('table');
  table.classList.add('table', 'table-sm', 'mb-0');
  
  const thead = document.createElement('thead');
  thead.innerHTML = `
    <tr class="child-table-header">
      <th>Hash</th>
      <th>Nonce</th>
      <th>Value</th>
      <th>Fee</th>
      <th>Base Fee</th>
      <th>Submitted</th>
      <th>Rebroadcasts</th>
      <th>Last Rebroadcast</th>
      <th>Actions</th>
    </tr>
  `;
  table.appendChild(thead);
  
  const tbody = document.createElement('tbody');
  transactions.forEach(tx => {
    const row = createTransactionRow(tx, false);
    tbody.appendChild(row);
  });
  table.appendChild(tbody);
  
  return table;
}

function createTransactionRow(tx, includeWallet = true) {
  const row = document.createElement('tr');
  row.classList.add('align-middle');
  
  const formatTimestamp = (timestamp) => {
    const date = new Date(timestamp);
    return date.toLocaleString();
  };
  
  const truncateHash = (hash) => {
    return hash.substring(0, 8) + '...' + hash.substring(hash.length - 6);
  };
  
  const truncateAddress = (address) => {
    return address.substring(0, 6) + '...' + address.substring(address.length - 4);
  };
  
  const formatWalletName = (walletName) => {
    if (walletName.length > 20) {
      return walletName.substring(0, 17) + '...';
    }
    return walletName;
  };
  
  let innerHTML = `
    <td class="font-monospace" title="${tx.hash}">${truncateHash(tx.hash)}</td>
  `;
  
  if (includeWallet) {
    innerHTML += `
      <td class="font-monospace" title="${tx.wallet_address}">${truncateAddress(tx.wallet_address)}</td>
      <td title="${tx.wallet_name}">${formatWalletName(tx.wallet_name)}</td>
    `;
  }
  
  innerHTML += `
    <td>${tx.nonce}</td>
    <td>${tx.value_formatted}</td>
    <td>${tx.fee_formatted}</td>
    <td>${tx.base_fee_formatted}</td>
    <td>${formatTimestamp(tx.submitted_at)}</td>
    <td>${tx.rebroadcast_count}</td>
    <td>${tx.rebroadcast_count > 0 ? formatTimestamp(tx.last_rebroadcast) : '-'}</td>
    <td>
      <button class="btn btn-sm btn-outline-secondary copy-rlp-btn" 
              data-rlp="${tx.rlp_encoded || ''}" 
              title="Copy RLP encoded transaction"
              ${!tx.rlp_encoded ? 'disabled' : ''}>
        <i class="fas fa-copy"></i> RLP
      </button>
    </td>
  `;
  
  row.innerHTML = innerHTML;
  
  const copyBtn = row.querySelector('.copy-rlp-btn');
  if (copyBtn && tx.rlp_encoded) {
    copyBtn.addEventListener('click', function() {
      copyToClipboard(tx.rlp_encoded, this);
    });
  }
  
  return row;
}

function initSendFundsModal() {
  const sendFundsBtn = document.getElementById('send-funds-btn');
  const sendFundsModal = new bootstrap.Modal(document.getElementById('sendFundsModal'));
  const submitBtn = document.getElementById('submitSendFunds');
  
  sendFundsBtn.addEventListener('click', function() {
    resetSendFundsForm();
    sendFundsModal.show();
  });
  
  submitBtn.addEventListener('click', function() {
    handleSendFunds(sendFundsModal);
  });
  
  document.getElementById('targetAddress').addEventListener('input', validateTargetAddress);
  document.getElementById('amount').addEventListener('input', validateAmount);
  document.getElementById('calldata').addEventListener('input', validateCalldata);
  document.getElementById('maxFee').addEventListener('input', validateGasFees);
  document.getElementById('maxTip').addEventListener('input', validateGasFees);
}

function resetSendFundsForm() {
  const form = document.getElementById('sendFundsForm');
  form.reset();
  
  form.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));
  form.querySelectorAll('.invalid-feedback').forEach(el => el.remove());
  
  document.getElementById('unit').value = 'eth';
  document.getElementById('maxTip').placeholder = '2.0';
}

function validateTargetAddress() {
  const input = document.getElementById('targetAddress');
  const value = input.value.trim();
  
  const isValid = /^0x[a-fA-F0-9]{40}$/.test(value);
  updateValidationState(input, isValid, 'Please enter a valid Ethereum address (0x followed by 40 hex characters)');
  
  return isValid;
}

function validateAmount() {
  const input = document.getElementById('amount');
  const value = parseFloat(input.value);
  
  const isValid = !isNaN(value) && value > 0;
  updateValidationState(input, isValid, 'Please enter a positive number');
  
  return isValid;
}

function validateCalldata() {
  const input = document.getElementById('calldata');
  const value = input.value.trim();
  
  if (value === '' || value === '0x') {
    updateValidationState(input, true);
    return true;
  }
  
  const isValid = /^0x[a-fA-F0-9]*$/.test(value) && value.length % 2 === 0;
  updateValidationState(input, isValid, 'Please enter valid hex data (0x followed by even number of hex characters)');
  
  return isValid;
}

function validateGasFees() {
  const maxFeeInput = document.getElementById('maxFee');
  const maxTipInput = document.getElementById('maxTip');
  
  const maxFeeValue = maxFeeInput.value.trim();
  const maxTipValue = maxTipInput.value.trim();
  
  updateValidationState(maxFeeInput, true);
  updateValidationState(maxTipInput, true);
  
  if (maxFeeValue) {
    const maxFee = parseFloat(maxFeeValue);
    if (isNaN(maxFee) || maxFee <= 0) {
      updateValidationState(maxFeeInput, false, 'Please enter a positive number');
      return false;
    }
  }
  
  if (maxTipValue) {
    const maxTip = parseFloat(maxTipValue);
    if (isNaN(maxTip) || maxTip <= 0) {
      updateValidationState(maxTipInput, false, 'Please enter a positive number');
      return false;
    }
  }
  
  if (maxFeeValue && maxTipValue) {
    const maxFee = parseFloat(maxFeeValue);
    const maxTip = parseFloat(maxTipValue);
    
    if (!isNaN(maxFee) && !isNaN(maxTip) && maxTip > maxFee) {
      updateValidationState(maxTipInput, false, 'Priority fee cannot be higher than max fee');
      updateValidationState(maxFeeInput, false, 'Max fee must be at least equal to priority fee');
      return false;
    }
  }
  
  return true;
}

function updateValidationState(input, isValid, errorMessage = '') {
  const existingFeedback = input.nextElementSibling?.classList.contains('invalid-feedback') 
    ? input.nextElementSibling : null;
  
  if (existingFeedback) {
    existingFeedback.remove();
  }
  
  if (isValid) {
    input.classList.remove('is-invalid');
  } else {
    input.classList.add('is-invalid');
    if (errorMessage) {
      const feedback = document.createElement('div');
      feedback.className = 'invalid-feedback';
      feedback.textContent = errorMessage;
      input.insertAdjacentElement('afterend', feedback);
    }
  }
}

function validateForm() {
  const targetValid = validateTargetAddress();
  const amountValid = validateAmount();
  const calldataValid = validateCalldata();
  
  const gasLimitInput = document.getElementById('gasLimit');
  let gasLimitValid = true;
  if (gasLimitInput.value.trim()) {
    const gasLimit = parseInt(gasLimitInput.value);
    gasLimitValid = !isNaN(gasLimit) && gasLimit > 0;
    updateValidationState(gasLimitInput, gasLimitValid, 'Please enter a positive number');
  }
  
  const maxFeeInput = document.getElementById('maxFee');
  const maxTipInput = document.getElementById('maxTip');
  let maxFeeValid = true;
  let maxTipValid = true;
  let gasFeeRelationValid = true;
  
  if (maxFeeInput.value.trim()) {
    const maxFee = parseFloat(maxFeeInput.value);
    maxFeeValid = !isNaN(maxFee) && maxFee > 0;
    updateValidationState(maxFeeInput, maxFeeValid, 'Please enter a positive number');
  }
  
  if (maxTipInput.value.trim()) {
    const maxTip = parseFloat(maxTipInput.value);
    maxTipValid = !isNaN(maxTip) && maxTip > 0;
    updateValidationState(maxTipInput, maxTipValid, 'Please enter a positive number');
  }
  
  if (maxFeeInput.value.trim() && maxTipInput.value.trim()) {
    const maxFee = parseFloat(maxFeeInput.value);
    const maxTip = parseFloat(maxTipInput.value);
    
    if (!isNaN(maxFee) && !isNaN(maxTip) && maxTip > maxFee) {
      gasFeeRelationValid = false;
      updateValidationState(maxTipInput, false, 'Priority fee cannot be higher than max fee');
      updateValidationState(maxFeeInput, false, 'Max fee must be at least equal to priority fee');
    }
  }
  
  return targetValid && amountValid && calldataValid && gasLimitValid && maxFeeValid && maxTipValid && gasFeeRelationValid;
}

function handleSendFunds(modal) {
  if (!validateForm()) {
    return;
  }
  
  const submitBtn = document.getElementById('submitSendFunds');
  const originalHTML = submitBtn.innerHTML;
  
  submitBtn.disabled = true;
  submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
  
  const data = {
    to: document.getElementById('targetAddress').value.trim(),
    value: document.getElementById('amount').value,
    unit: document.getElementById('unit').value
  };
  
  const calldata = document.getElementById('calldata').value.trim();
  if (calldata && calldata !== '0x') {
    data.data = calldata;
  }
  
  const gasLimit = document.getElementById('gasLimit').value.trim();
  if (gasLimit) {
    data.gasLimit = parseInt(gasLimit);
  }
  
  const maxFee = document.getElementById('maxFee').value.trim();
  if (maxFee) {
    data.maxFee = maxFee;
  }
  
  const maxTip = document.getElementById('maxTip').value.trim();
  if (maxTip) {
    data.maxTip = maxTip;
  }
  
  fetch('/api/root-wallet/send-transaction', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  })
  .then(response => response.json().then(data => ({ status: response.status, data: data })))
  .then(result => {
    if (result.status === 200) {
      showTransactionResult(result.data, true);
      modal.hide();
      
      setTimeout(() => {
        window.location.reload();
      }, 2000);
    } else {
      const errorMessage = result.data.error || result.data || 'Unknown error';
      showTransactionResult({ error: errorMessage }, false);
    }
  })
  .catch(error => {
    console.error('Error sending transaction:', error);
    showTransactionResult({ error: 'Network error: ' + error.message }, false);
  })
  .finally(() => {
    submitBtn.disabled = false;
    submitBtn.innerHTML = originalHTML;
  });
}

function showTransactionResult(result, success) {
  const alertDiv = document.createElement('div');
  alertDiv.className = `alert alert-${success ? 'success' : 'danger'} alert-dismissible fade show position-fixed`;
  alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
  
  if (success) {
    alertDiv.innerHTML = `
      <i class="fas fa-check-circle"></i>
      <strong>Transaction Sent!</strong><br>
      Hash: <code class="font-monospace">${result.txHash}</code><br>
      Nonce: <code>${result.nonce}</code>
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
  } else {
    const errorMsg = typeof result.error === 'string' ? result.error : 'Unknown error';
    alertDiv.innerHTML = `
      <i class="fas fa-exclamation-circle"></i>
      <strong>Transaction Failed!</strong><br>
      ${errorMsg}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
  }
  
  document.body.appendChild(alertDiv);
  
  setTimeout(() => {
    if (alertDiv.parentNode) {
      alertDiv.remove();
    }
  }, 5000);
}
</script>
{{ end }} 

{{ define "css" }}
<style>
.spammer-name-link {
  display: inline-block;
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  vertical-align: middle;
}

.tx-expansion-row {
  background-color: #f8f9fa;
  border-top: 1px solid #dee2e6;
}

.tx-expansion-row td {
  padding: 0 !important;
}

.tx-expansion-row table {
  margin: 0;
  border: none;
}

.tx-expansion-row table th,
.tx-expansion-row table td {
  border-top: none;
  border-bottom: 1px solid #dee2e6;
  padding: 0.5rem;
  font-size: 0.875rem;
}

.tx-expansion-row table th {
  background-color: var(--bs-secondary-bg);
  color: var(--bs-secondary-color);
  font-weight: 600;
}

.child-table-header th {
  background-color: var(--bs-secondary-bg);
  color: var(--bs-secondary-color);
  font-weight: 600;
}

.expand-btn {
  white-space: nowrap;
  width: 2.5rem;
  text-align: center;
}

.expand-btn i {
  transition: transform 0.2s ease;
}

.btn-group .btn {
  min-width: 120px;
}

.table-responsive {
  transition: opacity 0.2s ease;
}

.font-monospace {
  font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

/* Improve table spacing */
.table th,
.table td {
  vertical-align: middle;
}

/* Reduce padding for wallet list */
#wallet-view .table td,
#wallet-view .table th {
  padding: 0.175rem 0.75rem;
}

/* Style for transaction hash and address tooltips */
[title] {
  cursor: help;
}
</style>
{{ end }}