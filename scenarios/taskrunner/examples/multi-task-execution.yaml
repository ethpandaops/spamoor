# Complex example with multiple tasks per execution cycle
# Shows contract interactions and cross-references

init:
  # Deploy main contract during initialization
  - type: deploy
    name: main_contract
    data:
      # Contract with multiple functions
      contract_code: "0x608060405234801561001057600080fd5b5060a0806100206000396000f3fe6080604052348015600f57600080fd5b506004361060325760003560e01c80632e64cec11460375780636057361d14605157806362738998146067575b600080fd5b6000805460405190815260200160405180910390f35b6067605c366004607a565b600055565b005b6072606d366004607a565b600190565b005b60008135905060798160a5565b92915050565b6000602082840312156090576000806040fd5b6000609c84828501606c565b91505092915050565b60a08160b8565b919050565b6000819050919050565b60bf8160ad565b811460d057600080fd5b5056fea2646970667358221220f9e8d7c6b5a4f3e2d1c0b9a8f7e6d5c4b3a2f1e0d9c8b7a6f5e4d3c2b1a09f064736f6c63430008070033"
      gas_limit: 300000

execution:
  # Deploy a new helper contract each cycle
  - type: deploy
    name: helper
    data:
      contract_code: "0x6080604052348015600f57600080fd5b50606e80601d6000396000f3fe6080604052348015600f57600080fd5b506004361060285760003560e01c8063853255cc146032575b600080fd5b6000604b36600460405180910390f35b6040518082815260200191505060405180910390a1565b6000602082840312156057576000806040fd5b81356060816088565b60006020820190508260018060018101601f166101000a036001600160a01b0316815260200191505092915050565b60008115156088565b919050565b60008135905060a081608a565b92915050565b919050565b60008135905060bb816088565b92915050565b6000602082840312156100d5576000806040fd5b60006100e384828501609e565b91505092915050565b60006020820190506100f6600083018461018e565b9291505056fea26469706673582212201a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a264736f6c63430008070033"
      gas_limit: 200000

  # Call function on main contract with random data  
  - type: call
    data:
      target: "{contract:main_contract}"
      call_data: "0x6057361d{random:32}"  # store(random_value)
      gas_limit: 50000

  # Call different function on main contract
  - type: call
    data:
      target: "{contract:main_contract}"
      call_data: "0x62738998{random:16}"  # setValue2(random_value)
      gas_limit: 50000

  # Interact with the helper contract deployed in this cycle
  - type: call
    data:
      target: "{contract:helper}"
      call_data: "0x853255cc{random:20}"  # process(random_data)
      gas_limit: 100000